(()=>{var t={n:n=>{var a=n&&n.__esModule?()=>n.default:()=>n;return t.d(a,{a}),a},d:(n,a)=>{for(var r in a)t.o(a,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:a[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";t.r(n);const a=flarum.core.compat["common/app"];t.n(a)().initializers.add("askvortsov/flarum-automod",(function(){console.log("[askvortsov/flarum-automod] Hello, forum and admin!")}));const r=flarum.core.compat["common/extend"],e=flarum.core.compat["common/components/EditUserModal"];var i=t.n(e);const o=flarum.core.compat["common/components/LoadingIndicator"];var s=t.n(o);const c=flarum.core.compat["common/utils/ItemList"];var u=t.n(c);function l(t){var n=t.filter((function(t){return t.actions()})).reduce((function(t,n){var a=n.actions().filter((function(t){return"add_to_group"===t.type||"remove_from_group"===t.type})).map((function(t){return t.settings.group_id}));return t.push.apply(t,a),t}),[]);return Array.from(new Set(n).values()).map((function(t){return app.store.getById("groups",t)})).filter((function(t){return t}))}function p(t,n){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},p(t,n)}function d(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n)}const v=flarum.core.compat["common/Component"];var h=t.n(v);const f=flarum.core.compat["common/components/GroupBadge"];var g=t.n(f),y=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=l(this.attrs.criteria),n=this.attrs.user;return m("div",{className:"ManagedGroups Form-group"},m("hr",null),m("h4",null,app.translator.trans("askvortsov-automod.lib.managed_groups.header")),m("ul",null,t.map((function(t){return m("label",{className:"checkbox"},n&&m("input",{type:"checkbox",checked:n.groups().includes(t),disabled:!0}),app.translator.trans("askvortsov-automod.lib.managed_groups.group_item",{badge:g().component({group:t,label:""}),groupName:t.nameSingular()}))}))),m("p",null,app.translator.trans("askvortsov-automod.lib.managed_groups.groups_not_editable")))},n}(h());const b=flarum.core.compat.Model;var _=t.n(b);const N=flarum.core.compat["models/User"];var k=t.n(N),x=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n}(_());Object.assign(x.prototype,{name:_().attribute("name"),icon:_().attribute("icon"),description:_().attribute("description"),actions:_().attribute("actions"),metrics:_().attribute("metrics"),requirements:_().attribute("requirements"),isValid:_().attribute("isValid"),invalidActionSettings:_().attribute("invalidActionSettings"),invalidRequirementSettings:_().attribute("invalidRequirementSettings")});const w=flarum.core.compat["admin/components/ExtensionPage"];var D=t.n(w);const L=flarum.core.compat["common/components/Link"];var O=t.n(L);const E=flarum.core.compat["common/components/Tooltip"];var q=t.n(E);const S=flarum.core.compat["common/helpers/icon"];var B=t.n(S);const G=flarum.core.compat["common/utils/classList"];var F=t.n(G);const C=flarum.core.compat["common/utils/stringToColor"];var I=t.n(C);const M=flarum.core.compat.Component;var j=t.n(M),T=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){return m("div",{className:"AutoModeratorInstructions"},m("h4",null,app.translator.trans("askvortsov-automod.admin.automoderator_instructions.header")),m("ul",null,app.translator.trans("askvortsov-automod.admin.automoderator_instructions.text")))},n}(j());function A(t){var n=t?t.name():app.translator.trans("askvortsov-automod.admin.automoderator_page.create_criterion_button"),a=t?t.icon()||"fas fa-bolt":"fas fa-plus",r=t?{"background-color":"#"+I()(t.name())}:"";return m(O(),{className:"ExtensionListItem",href:app.route.criterion(t)},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:r},B()(a)),m("span",{className:F()({"ExtensionListItem-title":!0,"ExtensionListItem--invalid":t&&!t.isValid()})},t&&!t.isValid()&&m(q(),{text:app.translator.trans("askvortsov-automod.admin.automoderator_page.criterion_invalid")},B()("fas fa-exclamation-triangle")),n))}var P=function(t){function n(){return t.apply(this,arguments)||this}d(n,t);var a=n.prototype;return a.oninit=function(n){var a=this;t.prototype.oninit.call(this,n),this.loading=!0,app.store.find("criteria").then((function(){a.loading=!1,m.redraw()}))},a.content=function(){return this.loading?m("div",{className:"Criteria"},m("div",{className:"container"},m(s(),null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("div",{className:"ExtensionsWidget-list Criteria-list"},m("p",{className:"Criteria-list-heading"},app.translator.trans("askvortsov-automod.admin.automoderator_page.list_heading")),m("div",{className:"ExtensionList"},[].concat(app.store.all("criteria").map(A),[A()]))),m(y,{criteria:app.store.all("criteria")}),m("hr",null),m(T,null)))},n}(D());function R(){return R=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},R.apply(this,arguments)}const K=flarum.core.compat["admin/components/AdminPage"];var W=t.n(K);const V=flarum.core.compat["common/components/Button"];var U=t.n(V);const z=flarum.core.compat["common/components/LinkButton"];var H=t.n(z);const X=flarum.core.compat["common/components/Select"];var J=t.n(X);const Q=flarum.core.compat["common/utils/Stream"];var Y=t.n(Q),Z=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.item,n=this.attrs.selected;return m("li",null,m("div",{className:"DriverListItem-info"},m("span",{className:"DriverListItem-name DriverListItem-undefined"},app.translator.trans("askvortsov-automod.admin.undefined_driver_item.text",{driverName:t.type})),U().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return n(n().filter((function(n){return n!==t})))}})),m("hr",null))},n}(j()),$=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t,n=this.attrs.driverType,a=this.attrs.type,r=this.attrs.settings,e=this.attrs.availableSettings,i=app.autoModeratorForms[n];return t=a in i?i[a].component({settings:r,availableSettings:e}):Object.keys(e).map((function(t){return m("div",{className:"Form-group"},m("input",{className:"FormControl",value:r()[t],onchange:function(n){var a=R({},r());a[t]=n.target.value,r(a)},placeholder:app.translator.trans(e[t])}))})),m("div",{className:"DriverListItem-form"},t)},n}(j()),tt=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.action,n=this.attrs.actionDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:F()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(q(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),U().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}}),m($,{driverType:"action",type:t.type,settings:t.settings,availableSettings:n.availableSettings})),m("hr",null)):m(Z,{item:t,selected:a})},n}(j());const nt=flarum.core.compat["components/Button"];var at=t.n(nt);const rt=flarum.core.compat["utils/Stream"];var et=t.n(rt),it=function(t){function n(){return t.apply(this,arguments)||this}d(n,t);var a=n.prototype;return a.oninit=function(n){t.prototype.oninit.call(this,n),this.state=-1,-1!==this.attrs.min()&&(this.state+=1),-1!==this.attrs.max()&&(this.state+=2),this.min=et()(this.attrs.min()),this.max=et()(this.attrs.max())},a.view=function(){return m("div",{className:"Form-group MinMaxSelector"},m("label",null,this.attrs.label),m("div",{className:"MinMaxSelector--inputs"},this.controls()))},a.controls=function(){var t=this,a=function(){return m("input",{className:"FormControl",type:"number",min:"0",max:t.state===n.State.BETWEEN?-1!==t.attrs.max()?t.attrs.max():t.max():1/0,placeholder:"min",bidi:t.attrs.min})},r=function(){return m("input",{className:"FormControl",type:"number",min:t.state===Math.max(0,n.State.BETWEEN?-1!==t.attrs.min()?t.attrs.min():t.min():0),placeholder:"max",bidi:t.attrs.max})},e=function(){return m("input",{className:"FormControl MinMaxSelector--placeholder",disabled:!0,placeholder:"X"})},i=function(n){return m(at(),{className:"Button",onclick:t.cycle.bind(t),icon:n})};switch(this.state){case n.State.LTE:return[e(),i("fas fa-less-than-equal"),r()];case n.State.GTE:return[e(),i("fas fa-greater-than-equal"),a()];case n.State.BETWEEN:return[a(),i("fas fa-less-than-equal"),e(),i("fas fa-less-than-equal"),r()]}},a.cycle=function(){switch(this.state++,this.state%=3,-1!==this.attrs.min()&&this.min(this.attrs.min()),-1!==this.attrs.max()&&this.max(this.attrs.max()),this.state){case n.State.GTE:this.attrs.min(this.min()),this.attrs.max(-1);break;case n.State.LTE:this.attrs.min(-1),this.attrs.max(this.max());break;case n.State.BETWEEN:this.attrs.min(this.min()),this.attrs.max(this.max())}},n}(j());it.State={GTE:0,LTE:1,BETWEEN:2};const ot=it;var st=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.metric,n=this.attrs.metricDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:F()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(q(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),U().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}})),m(ot,{min:t.min,max:t.max}),m("hr",null)):m(Z,{item:t,selected:a})},n}(j());const mt=flarum.core.compat["common/components/Switch"];var ct=t.n(mt),ut=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.requirement,n=this.attrs.requirementDef,a=this.attrs.selected;return n?m("li",null,m("div",{className:F()({"DriverListItem-info":!0,"DriverListItem--missingExt":n.missingExt})},n.missingExt&&m(q(),{text:app.translator.trans("askvortsov-automod.admin.criterion_page.driver_missing_ext")},B()("fas fa-exclamation-triangle")),m("span",{className:"DriverListItem-name"},app.translator.trans(n.translationKey)),U().component({className:"Button Button--link",icon:"fas fa-trash-alt",onclick:function(){return a(a().filter((function(n){return n!==t})))}})),m(ct(),{state:t.negated(),onchange:t.negated},app.translator.trans("askvortsov-automod.admin.criterion_page.negated")),m($,{driverType:"requirement",type:t.type,settings:t.settings,availableSettings:n.availableSettings}),m("hr",null)):m(Z,{item:t,selected:a})},n}(j());const lt=flarum.core.compat["common/components/Alert"];var pt,dt,vt,ht=t.n(lt),ft=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.criterion;if(t){var n=[];t.isValid()?n.push(m(ht(),{type:"success",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.valid"))):n.push(m(ht(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.invalid")));var a=t.invalidActionSettings();a&&Object.keys(a).length&&n.push(m(ht(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.action_validation_errors"),m("div",null,m("ol",null,Object.keys(a).map((function(t){return m("li",null,m("strong",null,t,":")," ",a[t].join(""))}))))));var r=t.invalidRequirementSettings();return r&&Object.keys(r).length&&n.push(m(ht(),{type:"error",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.requirement_validation_errors"),m("div",null,m("ol",null,Object.keys(r).map((function(t){return m("li",null,m("strong",null,t,":")," ",r[t].join(""))})))))),0===t.metrics().length&&0===t.requirements().length&&n.push(m(ht(),{type:"danger",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.no_metrics_or_reqs"))),0===t.actions().length&&n.push(m(ht(),{type:"danger",dismissible:!1},app.translator.trans("askvortsov-automod.admin.criterion_status.no_actions"))),m("div",{className:"StatusCheck Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_status.heading")),n)}},n}(j()),gt=function(t){function n(){return t.apply(this,arguments)||this}d(n,t);var a=n.prototype;return a.oninit=function(n){var a=this;t.prototype.oninit.call(this,n),this.id=m.route.param("id"),this.name=Y()(""),this.icon=Y()("fas fa-bolt"),this.description=Y()(""),this.actionsOnGain=Y()([]),this.actionsOnLoss=Y()([]),this.metrics=Y()([]),this.requirements=Y()([]),this.newActionOnGain=Y()(""),this.newActionOnLoss=Y()(""),this.newMetric=Y()(""),this.newRequirement=Y()(""),this.loadingDrivers=!0,app.request({method:"GET",url:app.forum.attribute("apiUrl")+"/automod_drivers"}).then((function(t){pt=t.data.attributes.action,dt=t.data.attributes.metric,vt=t.data.attributes.requirement,a.loadingDrivers=!1,m.redraw()})),"new"!==this.id&&(this.loadingCriterion=!0,app.store.find("criteria",this.id).then((function(t){a.loadCriterion(t),a.loadingCriterion=!1,m.redraw()})))},a.loadCriterion=function(t){this.criterion=t,this.name(t.name()),this.icon(t.icon()||"fas fa-bolt"),this.description(t.description()),this.metrics(t.metrics().map((function(t){return{type:t.type,min:Y()(t.min),max:Y()(t.max)}}))),this.actionsOnGain(t.actions().filter((function(t){return t.gain})).map((function(t){return{type:t.type,settings:Y()(t.settings)}}))),this.actionsOnLoss(t.actions().filter((function(t){return!t.gain})).map((function(t){return{type:t.type,settings:Y()(t.settings)}}))),this.requirements(t.requirements().map((function(t){return{type:t.type,negated:Y()(t.negated),settings:Y()(t.settings)}})))},a.headerInfo=function(){var t,n="";return this.loadingCriterion?(n=app.translator.trans("askvortsov-automod.admin.criterion_page.loading"),t=app.translator.trans("askvortsov-automod.admin.criterion_page.loading")):t=this.criterion?this.criterion.name():app.translator.trans("askvortsov-automod.admin.criterion_page.new_criterion"),{className:"CriterionPage",icon:this.icon(),title:t,description:n}},a.content=function(){return this.loadingCriterion||this.loadingDrivers?m("div",{className:"Criteria"},m("div",{className:"container"},m(s(),null))):m("div",{className:"Criteria"},m("div",{className:"container"},m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Form-group"},m(H(),{className:"Button",icon:"fas fa-chevron-left",href:app.route("extension",{id:"askvortsov-automod"})},app.translator.trans("askvortsov-automod.admin.criterion_page.back"))),m(ft,{criterion:this.criterion}),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.name_label")),m("input",{className:"FormControl",bidi:this.name,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.icon_label")),m("input",{className:"FormControl",bidi:this.icon,required:!0})),m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.description_label")),m("input",{className:"FormControl",bidi:this.description})),this.metricsAndRequirementsForm(),this.actionsForm(),m("div",{className:"Form-group"},m(U(),{type:"submit",className:"Button Button--primary",loading:this.saving,disabled:this.saving},app.translator.trans("core.admin.settings.submit_button"))),this.criterion&&m(U(),{type:"button",onclick:this.delete.bind(this),className:"Button Button--danger",loading:this.deleting,disabled:this.saving},app.translator.trans("askvortsov-automod.admin.criterion_page.delete_button"))),m("hr",null),m(T,null)))},a.metricsAndRequirementsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_and_requirements_label")),m("div",{className:"helpText"},app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_and_requirements_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.metrics_heading")),m("ul",{className:"DriverList DriverList--primary"},this.metrics().map((function(n){return m(st,{metric:n,metricDef:dt[n.type],selected:t.metrics})}))),m("span",{class:"DriverGroup-controls"},J().component({options:Object.keys(dt).reduce((function(t,n){return t[n]=app.translator.trans(dt[n].translationKey),t}),{}),value:this.newMetric(),onchange:this.newMetric}),U().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newMetric(),onclick:function(){t.metrics([].concat(t.metrics(),[{type:t.newMetric(),min:Y()(),max:Y()()}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.requirements_heading")),m("ul",{className:"DriverList DriverList--primary"},this.requirements().map((function(n){return m(ut,{requirement:n,requirementDef:vt[n.type],selected:t.requirements})}))),m("span",{class:"DriverGroup-controls"},J().component({options:Object.keys(vt).reduce((function(t,n){return t[n]=app.translator.trans(vt[n].translationKey),t}),{}),value:this.newRequirement(),onchange:this.newRequirement}),U().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newRequirement(),onclick:function(){t.requirements([].concat(t.requirements(),[{type:t.newRequirement(),negated:Y()(!1),settings:Y()({})}]))}})))))},a.actionsForm=function(){var t=this;return m("div",{className:"Form-group"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_label")),m("div",{className:"helpText"},app.translator.trans("askvortsov-automod.admin.criterion_page.actions_help")),m("div",{className:"SettingsGroups"},m("div",{className:"DriverGroup"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_on_gain_heading")),m("ul",{className:"DriverList DriverList--primary"},this.actionsOnGain().map((function(n){return m(tt,{action:n,actionDef:pt[n.type],selected:t.actionsOnGain})}))),m("span",{class:"DriverGroup-controls"},J().component({options:Object.keys(pt).reduce((function(t,n){return t[n]=app.translator.trans(pt[n].translationKey),t}),{}),value:this.newActionOnGain(),onchange:this.newActionOnGain}),U().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnGain(),onclick:function(){t.actionsOnGain([].concat(t.actionsOnGain(),[{type:t.newActionOnGain(),settings:Y()({})}]))}}))),m("div",{className:"DriverGroup DriverGroup--secondary"},m("label",null,app.translator.trans("askvortsov-automod.admin.criterion_page.actions_on_loss_heading")),m("ul",{className:"DriverList"},this.actionsOnLoss().map((function(n){return m(tt,{action:n,actionDef:pt[n.type],selected:t.actionsOnLoss})}))),m("span",{class:"DriverGroup-controls"},J().component({options:Object.keys(pt).reduce((function(t,n){return t[n]=app.translator.trans(pt[n].translationKey),t}),{}),value:this.newActionOnLoss(),onchange:this.newActionOnLoss}),U().component({className:"Button DriverList-button",icon:"fas fa-plus",disabled:!this.newActionOnLoss(),onclick:function(){t.actionsOnLoss([].concat(t.actionsOnLoss(),[{type:t.newActionOnLoss(),settings:Y()({})}]))}})))))},a.data=function(){return{name:this.name(),icon:this.icon(),description:this.description(),actions:[].concat(this.actionsOnGain().map((function(t){return R({},t,{gain:!0,settings:t.settings()})})),this.actionsOnLoss().map((function(t){return R({},t,{gain:!1,settings:t.settings()})}))),metrics:this.metrics().map((function(t){return{type:t.type,min:t.min(),max:t.max()}})),requirements:this.requirements().map((function(t){return{type:t.type,negated:t.negated(),settings:t.settings()}}))}},a.delete=function(t){t.preventDefault(),this.deleting=!0,m.redraw(),this.criterion.delete().then((function(){m.route.set(app.route("extension",{id:"askvortsov-automod"}))}))},a.onsubmit=function(t){var n=this;t.preventDefault(),this.saving=!0,m.redraw();var a=this.criterion||app.store.createRecord("criteria");a.save(this.data()).then((function(t){"new"===n.id?m.route.set(app.route.criterion(t)):(n.loadCriterion(a),n.saving=!1,m.redraw())}))},n}(W());const yt=flarum.core.compat["components/Dropdown"];var bt=t.n(yt);const _t=flarum.core.compat["helpers/icon"];var Nt=t.n(_t);const kt=flarum.core.compat["models/Group"];var xt=t.n(kt),wt=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this,n=app.store.getById("groups",this.attrs.value),a=n?[Nt()(n.icon()),"\t",n.namePlural()]:app.translator.trans("askvortsov-automod.admin.group_selector.placeholder");return m("div",{className:"Form-group"},m("label",null,this.attrs.label),this.attrs.disabled?m("div",{className:"Button Button--danger"},a):m(bt(),{label:a,disabled:this.attrs.disabled,buttonClassName:"Button Button--danger"},app.store.all("groups").filter((function(t){return![xt().MEMBER_ID,xt().GUEST_ID].includes(t.id())})).map((function(a){return at().component({active:n&&n.id()===a.id(),disabled:n&&n.id()===a.id(),icon:a.icon(),onclick:function(){t.attrs.onchange(a.id())}},a.namePlural())}))))},n}(j()),Dt=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m(wt,{value:t().group_id,onchange:function(n){return t({group_id:n})}})},n}(j()),Lt=function(t){function n(){return t.apply(this,arguments)||this}return d(n,t),n.prototype.view=function(){var t=this.attrs.settings;return m("div",{className:"Form-group"},m("div",{className:"Form-group"},m(ct(),{state:t().indefinitely,onchange:function(n){return t(R({},t(),{indefinitely:n}))}},app.translator.trans("askvortsov-automod.admin.suspend_selector.indefinitely"))),!t().indefinitely&&m("div",{className:"Form-group"},m("input",{className:"FormControl",type:"number",min:"0",value:t().days,onchange:function(n){return t(R({},t(),{days:n.target.value}))},placeholder:app.translator.trans("askvortsov-automod.admin.suspend_selector.days")})))},n}(h());app.initializers.add("askvortsov/flarum-automod",(function(){app.routes.criterion={path:"/askvortsov-automod/criterion/:id",component:gt},app.autoModeratorForms={action:{add_to_group:Dt,remove_from_group:Dt,suspend:Lt},requirement:{in_group:Dt}},app.extensionData.for("askvortsov-automod").registerPage(P),app.route.criterion=function(t){return app.route("criterion",{id:(null==t?void 0:t.id())||"new"})},(0,r.extend)(i().prototype,"oninit",(function(){var t=this;this.loading=!0,app.store.find("criteria").then((function(n){l(n).forEach((function(n){return delete t.groups[n.id()]})),t.loading=!1,m.redraw()}))})),(0,r.override)(i().prototype,"fields",(function(t){if(this.loading){var n=new(u());return n.add("loading",m(s(),null)),n}var a=t();return a.add("Criteria",m(y,{criteria:app.store.all("criteria"),user:this.attrs.user}),10),a})),app.store.models.criteria=x,k().prototype.criteria=_().hasMany("criteria")}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map